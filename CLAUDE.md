# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is a **Kost Management** web application built with TanStack Start (React + TypeScript). It's a boarding house management system with two user roles: Admin (property managers) and Member (tenants). The app is designed as a mobile-first PWA with a bottom navigation bar pattern.

## Development Commands

**Important:** Do not run the dev server automatically. The user always runs `bun --bun run dev` themselves. Only tell them when they need to run it.

All commands use Bun:

```bash
# Install dependencies
bun install

# Development server (runs on port 3000) - TELL USER TO RUN, don't run yourself
bun --bun run dev

# Build for production
bun --bun run build

# Preview production build
bun --bun run preview

# Run tests
bun --bun run test

# Linting and formatting (uses Biome)
bun --bun run lint      # Check for lint errors
bun --bun run format    # Format code
bun --bun run check     # Run both lint and format checks

# Deploy to Cloudflare
bun --bun run deploy
```

## Architecture

### Tech Stack

- **Framework**: TanStack Start (React 19, TypeScript, Vite)
- **Router**: TanStack Router with file-based routing
- **Styling**: Tailwind CSS v4 with CSS variables
- **UI Components**: shadcn/ui (New York style) with Radix UI primitives
- **Icons**: Lucide React
- **Linting/Formatting**: Biome
- **Testing**: Vitest with jsdom
- **Deployment**: Cloudflare Workers (Wrangler)

### Route Structure

Routes are file-based in `src/routes/`. The project uses layout routes heavily:

```
src/routes/
├── __root.tsx           # Root layout (HTML shell, fonts, global styles)
├── index.tsx            # Landing page
├── _auth.tsx            # Auth layout wrapper (login, debug)
├── _auth/
│   ├── login.tsx
│   └── debug.tsx
├── admin.tsx            # Admin layout (max-w-lg centered container)
├── admin/
│   ├── _main/           # Routes WITH bottom tabbar
│   │   ├── route.tsx    # Layout with AdminNavbar
│   │   ├── index.tsx    # Dashboard
│   │   ├── tagihan.tsx
│   │   ├── pengumuman.tsx
│   │   └── profil.tsx
│   ├── tagihan/
│   │   └── detail.tsx   # Detail pages WITHOUT tabbar
│   ├── profil/
│   │   ├── informasi-kost.tsx
│   │   ├── informasi-pemilik.tsx
│   │   ├── peraturan.tsx
│   │   └── rekening.tsx
│   ├── tambah-penghuni/ # Multi-step form flow
│   │   ├── pilih-kamar.tsx
│   │   ├── form.tsx
│   │   └── hasil.tsx
│   └── laporan/
│       ├── index.tsx
│       └── view.tsx
└── member.tsx           # Member layout
└── member/
    ├── _main/           # Routes WITH bottom tabbar
    │   ├── route.tsx    # Layout with MemberNavbar
    │   ├── index.tsx
    │   ├── tagihan.tsx
    │   ├── keluhan.tsx
    │   └── profil.tsx
    ├── tagihan/
    │   ├── detail.tsx
    │   └── bayar.tsx
    ├── keluhan/
    │   ├── buat.tsx
    │   └── detail.tsx
    └── notifikasi/
        └── index.tsx
```

**Key routing patterns:**
- `_main` routes have the bottom tabbar navigation (via `TabBar` component)
- Routes outside `_main` are full-screen without navigation (forms, detail pages)
- Underscore prefix (`_auth`, `_main`) creates layout routes without adding path segments

### Component Conventions

- **UI Components**: `src/components/ui/` - shadcn/ui components (Button, Input, Dialog, etc.)
- **Custom Components**: `src/components/` - App-specific components
- **Utils**: `src/lib/utils.ts` - Contains `cn()` for Tailwind class merging

### Styling

- Tailwind CSS v4 with `@theme inline` for CSS variables
- Custom color scheme defined in `src/styles.css` using OKLCH colors
- Base background: `#F2F2F2` (light gray)
- Primary accent: Blue (`oklch(0.7468 0.1402 244.6411)`)
- Border radius: `1.25rem` (20px) - consistently rounded UI
- Mobile-first design with `max-w-lg` container for main content

### Navigation Pattern

The app uses a custom `TabBar` component (`src/components/tabbar.tsx`) with animated icons:
- Admin routes: Home, Tagihan (Bills), Pengumuman (Announcements), Profil
- Member routes: Home, Tagihan, Keluhan (Complaints), Profil

### Generated Files

- `src/routeTree.gen.ts` - **Auto-generated by TanStack Router**. Do not edit manually. Excluded from linting/formatting in VS Code settings.

## Path Aliases

- `@/` maps to `src/` (configured in `tsconfig.json` and `vite.config.ts`)

## Biome Configuration

- Uses tabs for indentation
- Double quotes for strings
- Organize imports on save (VS Code setting)
- Ignores: `src/routeTree.gen.ts`, `src/styles.css`

## Cloudflare Deployment

- Configured in `wrangler.jsonc`
- Uses `@tanstack/react-start/server-entry` as the main entry
- Node.js compatibility enabled

## Adding New UI Components

This project uses shadcn/ui. To add new components:

```bash
npx shadcn add <component-name>
```

Components are installed to `src/components/ui/` with the New York style variant.
